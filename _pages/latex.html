---
layout: default
title: Referencia de Comandos de LaTeX para Matemáticos
permalink: /comandos-latex/
---

<!-- begin hero -->
<section class="hero hero--left">
  <div class="container">
    <h1 class="hero__title">{{ page.title }}</h1>
      <div style="margin-top: 10px;">
          Comandos LaTeX organizados por categorías matemáticas. Haz clic en cualquier comando para copiarlo al portapapeles
      </div>
  </div>
</section>
<!-- end hero -->

<section class="section latex-page animate">
  <div class="container">

    <!-- Toolbar: Categorías + Buscador -->
    <div class="latex-toolbar">
      <div class="latex-categories" role="toolbar" aria-label="Filtrar por categoría">
        <button type="button" class="category-button is-active" data-cat="all" aria-pressed="true">Todos</button>
        {% for pair in site.data.lattex %}
          {% assign cat = pair[0] %}
          <button type="button" class="category-button" data-cat="{{ cat }}" aria-pressed="false">{{ cat }}</button>
        {% endfor %}
      </div>

        <div class="latex-search">
        <label for="latex-search-input" class="screen-reader-text">Buscar comando</label>
        <input id="latex-search-input" type="search" placeholder="Buscar por nombre o código…" autocomplete="off">
      </div>

    </div>


    <!-- Cuadrícula de tarjetas -->
    <div id="latex-grid" class="latex-grid">
      {% for pair in site.data.lattex %}
        {% assign cat = pair[0] %}
        {% assign items = pair[1] %}
        {% for item in items %}
          {% assign size = item.size | default: 1 %}
          <article class="latex-card size-{{ size }}" tabindex="0"
                   data-name="{{ item.name | downcase }}"
                   data-code="{{ item.code | xml_escape }}"
                   data-category="{{ cat }}"
                   title="Clic para copiar el código">
            <header class="card-title">{{ item.name }}</header>
            <div class="card-preview">
              {{ item.preview }}
            </div>
            <footer class="card-code"><code>{{ item.code }}</code></footer>
          </article>
        {% endfor %}
      {% endfor %}
    </div>

  </div>
</section>

<!-- Notificaciones: Notyf -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css">
<script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script>

<script>
(function(){
  const grid = document.getElementById('latex-grid');
  const searchInput = document.getElementById('latex-search-input');
  const buttons = document.querySelectorAll('.category-button');
  let cards = Array.from(document.querySelectorAll('.latex-card'));

  // Inicializar Notyf (global singleton en window para reuso)
  const notyf = window.notyf || new Notyf({
    duration: 1600,
    ripple: true,
    position: { x: 'right', y: 'top' }
  });
  window.notyf = notyf;

  let activeCat = 'all';

  // Deduplicate cards by name: merge categories and keep the first instance
  (function dedupeCards(){
    const map = new Map(); // key: normalized name (data-name), value: element
    for (const card of cards) {
      const key = (card.dataset.preview || '').trim().toLowerCase();
      const cat = (card.dataset.category || '').trim();
      if (!map.has(key)) {
        // First time we see this name
        card.dataset.category = cat ? cat : '';
        map.set(key, card);
      } else {
        // Duplicate by name: merge categories into the first card, remove this one
        const first = map.get(key);
        const existing = (first.dataset.category || '').split(',').filter(Boolean);
        const incoming = (cat || '').split(',').filter(Boolean);
        // Merge unique categories
        const merged = Array.from(new Set([...existing, ...incoming]));
        first.dataset.category = merged.join(',');
        // Remove duplicate node from DOM
        card.remove();
      }
    }
    // Refresh cards NodeList to reflect removals
    cards = Array.from(document.querySelectorAll('.latex-card'));
  })();

  function normalize(s){
    return (s || '').toString().toLowerCase()
      .normalize('NFD').replace(/[\u0300-\u036f]/g,'').trim();
  }

  function applyFilters(){
    const term = normalize(searchInput.value);
    cards.forEach(card => {
      const name = normalize(card.dataset.name);
      const code = normalize(card.dataset.code);
      const cat  = card.dataset.category || '';
      const cats = cat ? cat.split(',') : [];
      const matchesText = !term || name.includes(term) || code.includes(term);
      const matchesCat  = (activeCat === 'all') || cats.includes(activeCat);
      card.hidden = !(matchesText && matchesCat);
    });
  }

  // Botones de categoría (selección única)
  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      buttons.forEach(b => { b.classList.remove('is-active'); b.setAttribute('aria-pressed','false'); });
      btn.classList.add('is-active');
      btn.setAttribute('aria-pressed','true');
      activeCat = btn.dataset.cat;
      applyFilters();
    });
  });

  // Búsqueda en vivo
  searchInput.addEventListener('input', applyFilters);
  searchInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') e.preventDefault(); });

  async function copyToClipboard(text){
    if (!text) return Promise.reject();
    if (navigator.clipboard && window.isSecureContext) {
      return navigator.clipboard.writeText(text);
    }
    // Last-resort fallback: use a temporary textarea; execCommand is deprecated
    // but kept here only if Clipboard API is unavailable.
    return new Promise((resolve, reject) => {
      const ta = document.createElement('textarea');
      ta.value = text;
      ta.setAttribute('readonly', '');
      ta.style.position = 'fixed';
      ta.style.top = '-9999px';
      document.body.appendChild(ta);
      ta.select();
      try {
        const ok = document.execCommand && document.execCommand('copy');
        document.body.removeChild(ta);
        ok ? resolve() : reject();
      } catch(e){
        document.body.removeChild(ta);
        reject(e);
      }
    });
  }

  // Copiar al portapapeles al hacer clic
  grid.addEventListener('click', (e) => {
    const card = e.target.closest('.latex-card');
    if (!card) return;
    const text = card.dataset.code || '';
    if (!text) return;

    const displayName = (card.querySelector('.card-title')?.textContent || 'Comando').trim();

    copyToClipboard(text)
      .then(() => { notyf.success(`¡"${displayName}" copiado al portapapeles!`); flashClicked(card); })
      .catch(() => { notyf.error('No se pudo copiar.'); flashClicked(card); });
  });

  // Accesibilidad: Enter para copiar
  grid.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
      const card = e.target.closest('.latex-card');
      if (!card) return;
      const text = card.dataset.code || '';
      const displayName = (card.querySelector('.card-title')?.textContent || 'Comando').trim();
      copyToClipboard(text)
        .then(() => { notyf.success(`¡${displayName} copiado al portapapeles!`); flashClicked(card); })
        .catch(() => { notyf.error('No se pudo copiar.'); flashClicked(card); });
    }
  });

  function flashClicked(el){
    if (!el) return;
    el.classList.add('is-clicked');
    setTimeout(() => el.classList.remove('is-clicked'), 160);
  }
})();
</script>
